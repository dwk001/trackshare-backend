import{j as e,c as a,u as t,L as r}from"./index-brUXm7F2.js";import{r as s}from"./vendor-KIEtaiwe.js";import{b as i}from"./router-mjhA_Ms8.js";import{p as l,d as o}from"./deepLinkService-COYD9DVj.js";import{P as n}from"./PageBanner-BUmYi7C2.js";import{n as c,m as d,H as x,X as m,M as g,e as h,o as y,k as p,p as u,D as j,E as w,S as b,P as v,l as k}from"./ui-D7Ik4R0t.js";import"./query-Y2oWywPX.js";import"./utils-CrFdsnXa.js";import"./apiService-sJWJ5l_Y.js";const f=async e=>{if(!e.trim())return[];try{const a=await(async e=>{const a=await fetch(`https://itunes.apple.com/search?term=${encodeURIComponent(e)}&media=music&limit=20`);if(!a.ok)throw new Error(`iTunes API error: ${a.status}`);const t=await a.json();return t.results&&0!==t.results.length?t.results.map(e=>({id:e.trackId,title:e.trackName,artist:e.artistName,album:e.collectionName,artwork:e.artworkUrl100?.replace("100x100","300x300")||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjNjY3ZWVhIi8+CjxjaXJjbGUgY3g9IjE1MCIgY3k9IjE1MCIgcj0iNTAiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xMjAgMTIwSDIwMFYxODBIMTIwVjEyMFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xMjAgMTIwSDIwMFYxODBIMTIwVjEyMFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xMjAgMTIwSDIwMFYxODBIMTIwVjEyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",previewUrl:e.previewUrl,url:e.trackViewUrl,duration:e.trackTimeMillis,releaseDate:e.releaseDate,provider:"itunes"})):[]})(e);if(a.length>0)return a}catch(a){}try{const a=await(async e=>{const a=await fetch(`https://api.deezer.com/search?q=${encodeURIComponent(e)}&limit=20`);if(!a.ok)throw new Error(`Deezer API error: ${a.status}`);const t=await a.json();return t.data&&0!==t.data.length?t.data.map(e=>({id:e.id,title:e.title,artist:e.artist.name,album:e.album.title,artwork:e.album.cover_xl||e.album.cover_medium||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDMwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjNjY3ZWVhIi8+CjxjaXJjbGUgY3g9IjE1MCIgY3k9IjE1MCIgcj0iNTAiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xMjAgMTIwSDIwMFYxODBIMTIwVjEyMFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xMjAgMTIwSDIwMFYxODBIMTIwVjEyMFoiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0xMjAgMTIwSDIwMFYxODBIMTIwVjEyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",previewUrl:e.preview,url:e.link,duration:e.duration?1e3*e.duration:void 0,releaseDate:e.release_date,provider:"deezer"})):[]})(e);return a}catch(a){throw new Error("Music search is temporarily unavailable. Please try again later.")}};function N({isOpen:t,onClose:r,onSignIn:s,onSignUp:i,trackData:l,className:o}){return t?e.jsx(c,{children:e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:r,children:e.jsxs(d.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:a("bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",o),onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary-500 to-primary-600 rounded-lg flex items-center justify-center",children:e.jsx(x,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Save Your Favorites"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sign in to save tracks you love"})]})]}),e.jsx("button",{onClick:r,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(m,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[l&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:l.artwork?e.jsx("img",{src:l.artwork,alt:`${l.title} artwork`,className:"w-full h-full rounded-lg object-cover"}):e.jsx(g,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:l.title}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",children:l.artist}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(x,{className:"w-4 h-4 text-red-500 mr-1"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Will be added to your favorites"})]})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"Why sign in?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(x,{className:"w-3 h-3 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Save your favorite tracks"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Build your personal music collection"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(h,{className:"w-3 h-3 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Get personalized recommendations"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Discover music tailored to your taste"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-primary-100 dark:bg-primary-900 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(g,{className:"w-3 h-3 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Connect your music services"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Play tracks directly in your preferred app"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsxs("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]}),e.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),"Sign up with Apple"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"By signing in, you agree to our Terms of Service and Privacy Policy"})})]})]})})}):null}function I({track:t,onLike:r,onShare:i,onAddToPlaylist:l,onDownload:o,onOpenOriginal:n,className:m}){const[g,h]=s.useState(!1),b=e=>{e(),h(!1)};return e.jsxs("div",{className:a("relative",m),children:[e.jsx("button",{onClick:()=>h(!g),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"More options",children:e.jsx(y,{className:"w-4 h-4"})}),e.jsx(c,{children:g&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>h(!1)}),e.jsx(d.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-20 overflow-hidden",children:e.jsxs("div",{className:"py-2",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:t.artist})]}),e.jsxs("div",{className:"py-1",children:[r&&e.jsxs("button",{onClick:()=>b(r),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(x,{className:"w-4 h-4 mr-3"}),"Like Track"]}),i&&e.jsxs("button",{onClick:()=>b(i),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(p,{className:"w-4 h-4 mr-3"}),"Share Track"]}),l&&e.jsxs("button",{onClick:()=>b(l),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(u,{className:"w-4 h-4 mr-3"}),"Add to Playlist"]}),o&&e.jsxs("button",{onClick:()=>b(o),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(j,{className:"w-4 h-4 mr-3"}),"Download"]}),n&&e.jsxs("button",{onClick:()=>b(n),className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[e.jsx(w,{className:"w-4 h-4 mr-3"}),"Open Original"]})]})]})})]})})]})}const M=[{value:"all",label:"All Genres"},{value:"pop",label:"Pop"},{value:"rock",label:"Rock"},{value:"hip-hop",label:"Hip-Hop"},{value:"electronic",label:"Electronic"},{value:"country",label:"Country"},{value:"jazz",label:"Jazz"},{value:"classical",label:"Classical"}];function S({className:m}){const{isAuthenticated:h,user:y}=t(),[u,j]=i(),[w,S]=s.useState(""),[C,D]=s.useState([]),[G,T]=s.useState(!1),[A,z]=s.useState(null),[P,R]=s.useState(!1),[Z,E]=s.useState(!1),[F,O]=s.useState("all"),[B,H]=s.useState([]),[U,Y]=s.useState(!1),[$,L]=s.useState(null);s.useEffect(()=>{const e=u.get("q");e&&(S(e),R(!0),E(!0))},[u]),s.useEffect(()=>{if(!w.trim())return D([]),R(!1),void E(!1);const e=setTimeout(async()=>{T(!0),z(null);try{const e=await f(w);D(e),R(!0),E(!0);const a=new URLSearchParams(u);a.set("q",w),j(a,{replace:!0})}catch(e){z(e instanceof Error?e.message:"Search failed"),D([])}finally{T(!1)}},500);return()=>clearTimeout(e)},[w,F,"auto",u,j]),s.useEffect(()=>{h&&X()},[h]);const X=async()=>{try{const e=await l.getConnectedProviders();H(e)}catch(e){}},W=async e=>{try{h||(L(e),Y(!0))}catch(a){}},J=async e=>{try{const a=await o.generateShareLink(e);navigator.share?await navigator.share({title:`${e.title} - ${e.artist}`,text:`Listen to ${e.title} on your favorite music platform!`,url:`https://trackshare.online/t/${a.shortId}`}):await navigator.clipboard.writeText(`https://trackshare.online/t/${a.shortId}`)}catch(a){const t=`${window.location.origin}/t/${e.id}`;navigator.share?navigator.share({title:`${e.title} by ${e.artist}`,text:`Check out this track: ${e.title}`,url:t}):navigator.clipboard.writeText(t)}};return e.jsxs("div",{className:a("min-h-screen bg-gray-50 dark:bg-gray-900",m),children:[e.jsx(n,{variant:"discovery",title:"Discover Music",subtitle:"Share the Beat",description:"Find trending tracks, get personalized recommendations, and discover new music across all genres"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("div",{className:"max-w-2xl mx-auto mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(b,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search for songs, artists, or paste a music link...",value:w,onChange:e=>S(e.target.value),className:"w-full pl-12 pr-4 py-3 text-lg rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),G&&e.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:e.jsx(r,{size:"sm"})})]})}),e.jsx(c,{children:Z&&e.jsxs(d.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Search Filters"}),e.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 transition-colors",children:"Hide Filters"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Genre"}),e.jsx("select",{value:F,onChange:e=>O(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:M.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"mb-8",children:G?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(r,{size:"lg"})}):A?e.jsx("div",{className:"text-center py-12",children:e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 max-w-md mx-auto",children:[e.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:A}),e.jsx("button",{onClick:()=>{w.trim()&&(T(!0),z(null),f(w).then(e=>{D(e),T(!1)}).catch(e=>{z(e instanceof Error?e.message:"Search failed"),T(!1)}))},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Try Again"})]})}):P&&0===C.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No tracks found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Try searching for a different artist or song name"}),e.jsxs("div",{className:"text-sm text-gray-400",children:[e.jsx("p",{children:"Search tips:"}),e.jsxs("ul",{className:"mt-2 space-y-1",children:[e.jsx("li",{children:'• Try just the artist name (e.g., "Drake")'}),e.jsx("li",{children:'• Use partial names (e.g., "Taylor" for Taylor Swift)'}),e.jsx("li",{children:"• Check spelling and try variations"})]})]})]}):P?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:['Search Results for "',w,'"']}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[C.length," tracks found"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:C.map((a,t)=>e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-shadow group",children:[e.jsxs("div",{className:"relative aspect-square rounded-t-lg overflow-hidden",children:[e.jsx("img",{src:a.artwork||"/placeholder-music.jpg",alt:a.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy",onError:e=>{e.currentTarget.src="/placeholder-music.jpg"}}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center",children:e.jsx("button",{onClick:()=>(async e=>{try{if(h&&B.length>0){const a=B[0];await o.openInProvider(e,a.provider)}else{const a=await o.generateShareLink(e);window.open(`/t/${a.shortId}`,"_blank")}}catch(a){window.open(e.url,"_blank")}})(a),className:"opacity-0 group-hover:opacity-100 bg-white bg-opacity-90 rounded-full p-3 hover:bg-opacity-100 transition-all duration-300 transform scale-75 group-hover:scale-100",children:e.jsx(v,{className:"w-6 h-6 text-gray-900 ml-1"})})}),e.jsx("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:a.provider})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate mb-1",children:a.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm truncate mb-2",children:a.artist}),a.album&&e.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-xs truncate mb-3",children:a.album}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>W(a),className:"p-2 text-gray-400 hover:text-red-500 transition-colors","aria-label":"Like track",children:e.jsx(x,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>J(a),className:"p-2 text-gray-400 hover:text-primary-500 transition-colors","aria-label":"Share track",children:e.jsx(p,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>(async e=>{try{if(!h||!y?.id)return L(e),void Y(!0);const a=await fetch("/api/posts/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"track",track:{id:e.id,title:e.title,artist:e.artist,album:e.album,artwork:e.artwork||e.artworkMedium,url:e.url,provider:e.provider||"itunes"},userId:y.id})});if(!a.ok){const e=await a.json().catch(()=>({error:"Unknown error"}));throw new Error(e.error||"Failed to create post")}await a.json(),alert("Track posted to your feed!")}catch(a){alert(`Failed to post track: ${a instanceof Error?a.message:"Unknown error"}`)}})(a),className:"p-2 text-gray-400 hover:text-blue-500 transition-colors","aria-label":"Post track",children:e.jsx(k,{className:"w-4 h-4"})})]}),e.jsx(I,{track:a,onLike:()=>W(a),onShare:()=>J(a),onAddToPlaylist:()=>{},onDownload:()=>{},onOpenOriginal:()=>window.open(a.url,"_blank")})]})]})]},`${a.provider}-${a.id}`))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Start searching for music"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Enter an artist name, song title, or paste a music link to get started"})]})})}),e.jsx(N,{isOpen:U,onClose:()=>{Y(!1),L(null)},onSignIn:()=>{if($){const e={trackId:$.id,title:$.title,artist:$.artist,artwork:$.artwork,url:$.url,timestamp:(new Date).toISOString()};localStorage.setItem("pendingFavorite",JSON.stringify(e))}window.location.href="/signin?redirect="+encodeURIComponent(window.location.pathname)},onSignUp:()=>{if($){const e={trackId:$.id,title:$.title,artist:$.artist,artwork:$.artwork,url:$.url,timestamp:(new Date).toISOString()};localStorage.setItem("pendingFavorite",JSON.stringify(e))}window.location.href="/signup?redirect="+encodeURIComponent(window.location.pathname)},trackData:$?{title:$.title,artist:$.artist,artwork:$.artwork}:void 0})]})}export{S as default};
