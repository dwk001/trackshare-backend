const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-Bbebq9lK.js","assets/vendor-SeVIIybd.js","assets/ui-BfNYVWSp.js","assets/router-DXo_BilD.js","assets/query-IysHnqDy.js","assets/utils-CrFdsnXa.js","assets/DiscoveryPage-BBYcUuIK.js","assets/SocialPage-tHoh_vmx.js","assets/ProfilePage-B1SEKs4R.js","assets/NotFoundPage-BkEMGq8_.js"])))=>i.map(i=>d[i]);
import{r as e,c as t,a as r}from"./vendor-SeVIIybd.js";import{R as a,a as s,B as i}from"./router-DXo_BilD.js";import{Q as n,a as o}from"./query-IysHnqDy.js";import{t as l,c}from"./utils-CrFdsnXa.js";import{M as d,T as m,U as h,a as u,C as p,B as x,S as y,b as g,m as f,c as b,d as v,L as j,X as w,e as k,G as N,f as E,g as S,H as P,A as C,R as _}from"./ui-BfNYVWSp.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var O={exports:{}},T={},I=e,L=Symbol.for("react.element"),D=Symbol.for("react.fragment"),$=Object.prototype.hasOwnProperty,A=I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R={key:!0,ref:!0,__self:!0,__source:!0};function U(e,t,r){var a,s={},i=null,n=null;for(a in void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(n=t.ref),t)$.call(t,a)&&!R.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===s[a]&&(s[a]=t[a]);return{$$typeof:L,type:e,key:i,ref:n,props:s,_owner:A.current}}T.Fragment=D,T.jsx=U,T.jsxs=U,O.exports=T;var z=O.exports,q={},B=t;q.createRoot=B.createRoot,q.hydrateRoot=B.hydrateRoot;var F={exports:{}};F.exports={ReactQueryDevtools:function(){return null},ReactQueryDevtoolsPanel:function(){return null}};var M=F.exports;let H,W,V,K={data:""},Q=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||K},G=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,J=/\/\*[^]*?\*\/|  +/g,Y=/\n+/g,Z=(e,t)=>{let r="",a="",s="";for(let i in e){let n=e[i];"@"==i[0]?"i"==i[1]?r=i+" "+n+";":a+="f"==i[1]?Z(n,i):i+"{"+Z(n,"k"==i[1]?"":t)+"}":"object"==typeof n?a+=Z(n,t?t.replace(/([^,])+/g,e=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):i):null!=n&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=Z.p?Z.p(i,n):i+":"+n+";")}return r+(t&&s?t+"{"+s+"}":s)+a},X={},ee=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+ee(e[r]);return t}return e},te=(e,t,r,a,s)=>{let i=ee(e),n=X[i]||(X[i]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(i));if(!X[n]){let t=i!==e?e:(e=>{let t,r,a=[{}];for(;t=G.exec(e.replace(J,""));)t[4]?a.shift():t[3]?(r=t[3].replace(Y," ").trim(),a.unshift(a[0][r]=a[0][r]||{})):a[0][t[1]]=t[2].replace(Y," ").trim();return a[0]})(e);X[n]=Z(s?{["@keyframes "+n]:t}:t,r?"":"."+n)}let o=r&&X.g?X.g:null;return r&&(X.g=X[n]),((e,t,r,a)=>{a?t.data=t.data.replace(a,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(X[n],t,a,o),n};function re(e){let t=this||{},r=e.call?e(t.p):e;return te(r.unshift?r.raw?((e,t,r)=>e.reduce((e,a,s)=>{let i=t[s];if(i&&i.call){let e=i(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;i=t?"."+t:e&&"object"==typeof e?e.props?"":Z(e,""):!1===e?"":e}return e+a+(null==i?"":i)},""))(r,[].slice.call(arguments,1),t.p):r.reduce((e,r)=>Object.assign(e,r&&r.call?r(t.p):r),{}):r,Q(t.target),t.g,t.o,t.k)}re.bind({g:1});let ae=re.bind({k:1});function se(e,t){let r=this||{};return function(){let t=arguments;return function a(s,i){let n=Object.assign({},s),o=n.className||a.className;r.p=Object.assign({theme:W&&W()},n),r.o=/ *go\d+/.test(o),n.className=re.apply(r,t)+(o?" "+o:"");let l=e;return e[0]&&(l=n.as||e,delete n.as),V&&l[0]&&V(n),H(l,n)}}}var ie=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,ne=(()=>{let e=0;return()=>(++e).toString()})(),oe=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),le="default",ce=(e,t)=>{let{toastLimit:r}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,r)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:a}=t;return ce(e,{type:e.toasts.find(e=>e.id===a.id)?1:0,toast:a});case 3:let{toastId:s}=t;return{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+i}))}}},de=[],me={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},he={},ue=(e,t=le)=>{he[t]=ce(he[t]||me,e),de.forEach(([e,r])=>{e===t&&r(he[t])})},pe=e=>Object.keys(he).forEach(t=>ue(e,t)),xe=(e=le)=>t=>{ue(t,e)},ye={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ge=e=>(t,r)=>{let a=((e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(null==r?void 0:r.id)||ne()}))(t,e,r);return xe(a.toasterId||(e=>Object.keys(he).find(t=>he[t].toasts.some(t=>t.id===e)))(a.id))({type:2,toast:a}),a.id},fe=(e,t)=>ge("blank")(e,t);fe.error=ge("error"),fe.success=ge("success"),fe.loading=ge("loading"),fe.custom=ge("custom"),fe.dismiss=(e,t)=>{let r={type:3,toastId:e};t?xe(t)(r):pe(r)},fe.dismissAll=e=>fe.dismiss(void 0,e),fe.remove=(e,t)=>{let r={type:4,toastId:e};t?xe(t)(r):pe(r)},fe.removeAll=e=>fe.remove(void 0,e),fe.promise=(e,t,r)=>{let a=fe.loading(t.loading,{...r,...null==r?void 0:r.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let s=t.success?ie(t.success,e):void 0;return s?fe.success(s,{id:a,...r,...null==r?void 0:r.success}):fe.dismiss(a),e}).catch(e=>{let s=t.error?ie(t.error,e):void 0;s?fe.error(s,{id:a,...r,...null==r?void 0:r.error}):fe.dismiss(a)}),e};var be=(t,r="default")=>{let{toasts:a,pausedAt:s}=((t={},r=le)=>{let[a,s]=e.useState(he[r]||me),i=e.useRef(he[r]);e.useEffect(()=>(i.current!==he[r]&&s(he[r]),de.push([r,s]),()=>{let e=de.findIndex(([e])=>e===r);e>-1&&de.splice(e,1)}),[r]);let n=a.toasts.map(e=>{var r,a,s;return{...t,...t[e.type],...e,removeDelay:e.removeDelay||(null==(r=t[e.type])?void 0:r.removeDelay)||(null==t?void 0:t.removeDelay),duration:e.duration||(null==(a=t[e.type])?void 0:a.duration)||(null==t?void 0:t.duration)||ye[e.type],style:{...t.style,...null==(s=t[e.type])?void 0:s.style,...e.style}}});return{...a,toasts:n}})(t,r),i=e.useRef(new Map).current,n=e.useCallback((e,t=1e3)=>{if(i.has(e))return;let r=setTimeout(()=>{i.delete(e),o({type:4,toastId:e})},t);i.set(e,r)},[]);e.useEffect(()=>{if(s)return;let e=Date.now(),t=a.map(t=>{if(t.duration===1/0)return;let a=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(a<0))return setTimeout(()=>fe.dismiss(t.id,r),a);t.visible&&fe.dismiss(t.id)});return()=>{t.forEach(e=>e&&clearTimeout(e))}},[a,s,r]);let o=e.useCallback(xe(r),[r]),l=e.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=e.useCallback((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),d=e.useCallback(()=>{s&&o({type:6,time:Date.now()})},[s,o]),m=e.useCallback((e,t)=>{let{reverseOrder:r=!1,gutter:s=8,defaultPosition:i}=t||{},n=a.filter(t=>(t.position||i)===(e.position||i)&&t.height),o=n.findIndex(t=>t.id===e.id),l=n.filter((e,t)=>t<o&&e.visible).length;return n.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+s,0)},[a]);return e.useEffect(()=>{a.forEach(e=>{if(e.dismissed)n(e.id,e.removeDelay);else{let t=i.get(e.id);t&&(clearTimeout(t),i.delete(e.id))}})},[a,n]),{toasts:a,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:m}}},ve=ae`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,je=ae`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,we=ae`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ke=se("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ve} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${je} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${we} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Ne=ae`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Ee=se("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Ne} 1s linear infinite;
`,Se=ae`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Pe=ae`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ce=se("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Se} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Pe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,_e=se("div")`
  position: absolute;
`,Oe=se("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Te=ae`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ie=se("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Te} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Le=({toast:t})=>{let{icon:r,type:a,iconTheme:s}=t;return void 0!==r?"string"==typeof r?e.createElement(Ie,null,r):r:"blank"===a?null:e.createElement(Oe,null,e.createElement(Ee,{...s}),"loading"!==a&&e.createElement(_e,null,"error"===a?e.createElement(ke,{...s}):e.createElement(Ce,{...s})))},De=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,$e=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,Ae=se("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Re=se("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Ue=e.memo(({toast:t,position:r,style:a,children:s})=>{let i=t.height?((e,t)=>{let r=e.includes("top")?1:-1,[a,s]=oe()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[De(r),$e(r)];return{animation:t?`${ae(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ae(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||r||"top-center",t.visible):{opacity:0},n=e.createElement(Le,{toast:t}),o=e.createElement(Re,{...t.ariaProps},ie(t.message,t));return e.createElement(Ae,{className:t.className,style:{...i,...a,...t.style}},"function"==typeof s?s({icon:n,message:o}):e.createElement(e.Fragment,null,n,o))});!function(e,t,r,a){Z.p=t,H=e,W=r,V=a}(e.createElement);var ze=({id:t,className:r,style:a,onHeightUpdate:s,children:i})=>{let n=e.useCallback(e=>{if(e){let r=()=>{let r=e.getBoundingClientRect().height;s(t,r)};r(),new MutationObserver(r).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return e.createElement("div",{ref:n,className:r,style:a},i)},qe=re`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Be=({reverseOrder:t,position:r="top-center",toastOptions:a,gutter:s,children:i,toasterId:n,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=be(a,n);return e.createElement("div",{"data-rht-toaster":n||"",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(a=>{let n=a.position||r,o=((e,t)=>{let r=e.includes("top"),a=r?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:oe()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...a,...s}})(n,d.calculateOffset(a,{reverseOrder:t,gutter:s,defaultPosition:r}));return e.createElement(ze,{id:a.id,key:a.id,onHeightUpdate:d.updateHeight,className:a.visible?qe:"",style:o},"custom"===a.type?ie(a.message,a):i?i(a):e.createElement(Ue,{toast:a,position:n}))}))};const Fe=new class{baseUrl;token=null;constructor(){this.baseUrl="/api",this.token=localStorage.getItem("auth_token")}async request(e,t={}){const r=`${this.baseUrl}${e}`,a={"Content-Type":"application/json",...t.headers};this.token&&(a.Authorization=`Bearer ${this.token}`);const s=await fetch(r,{...t,headers:a});if(!s.ok){const e=await s.json().catch(()=>({message:"Network error"}));throw new Error(e.message||`HTTP ${s.status}`)}return s.json()}async signIn(e){const t=await this.request("/auth/signin",{method:"POST",body:JSON.stringify(e)});return t.token&&(this.token=t.token,localStorage.setItem("auth_token",t.token)),t}async signUp(e){const t=await this.request("/auth/signup",{method:"POST",body:JSON.stringify(e)});return t.token&&(this.token=t.token,localStorage.setItem("auth_token",t.token)),t}async signOut(){try{await this.request("/auth/signout",{method:"POST"})}finally{this.token=null,localStorage.removeItem("auth_token")}}async getCurrentUser(){return this.request("/auth/me")}async updateProfile(e){return this.request("/auth/profile",{method:"PUT",body:JSON.stringify(e)})}async getTracks(e={}){const t=new URLSearchParams;return e.genre&&t.append("genre",e.genre),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),this.request(`/tracks?${t}`)}async searchTracks(e,t={}){const r=new URLSearchParams({q:e});return Object.entries(t).forEach(([e,t])=>{t&&r.append(e,t.toString())}),this.request(`/search?${r}`)}async getPosts(e={}){const t=new URLSearchParams;return e.feedType&&t.append("feedType",e.feedType),e.limit&&t.append("limit",e.limit.toString()),e.offset&&t.append("offset",e.offset.toString()),this.request(`/posts?${t}`)}async likePost(e){return this.request(`/posts/${e}/like`,{method:"POST"})}async sharePost(e){return this.request(`/posts/${e}/share`,{method:"POST"})}},Me=e.createContext(void 0);function He({children:t}){const[r,a]=e.useState(null),[s,i]=e.useState(!0),n=!!r;e.useEffect(()=>{o()},[]);const o=async()=>{try{i(!0);const e=await Fe.getCurrentUser();e.user&&a(e.user)}catch(e){localStorage.removeItem("auth_token")}finally{i(!1)}},l=async()=>{try{await Fe.signOut()}catch(e){}finally{a(null),localStorage.removeItem("auth_token")}},c={user:r,isAuthenticated:n,isLoading:s,signIn:async e=>{try{const t=await Fe.signIn(e);t.user&&(a(t.user),t.token&&localStorage.setItem("auth_token",t.token))}catch(t){throw t}},signUp:async e=>{try{const t=await Fe.signUp(e);t.user&&(a(t.user),t.token&&localStorage.setItem("auth_token",t.token))}catch(t){throw t}},signOut:l,updateProfile:async e=>{try{const t=await Fe.updateProfile(e);t.user&&a(t.user)}catch(t){throw t}},refreshUser:async()=>{try{const e=await Fe.getCurrentUser();e.user&&a(e.user)}catch(e){await l()}}};return z.jsx(Me.Provider,{value:c,children:t})}const We={},Ve=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=e?.nonce||e?.getAttribute("nonce");a=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in We)return;We[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,r&&s.setAttribute("nonce",r),document.head.appendChild(s),t?new Promise((t,r)=>{s.addEventListener("load",t),s.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})},Ke=e.createContext(null),Qe={didCatch:!1,error:null};class Ge extends e.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Qe}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,r,a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];null===(t=(r=this.props).onReset)||void 0===t||t.call(r,{args:s,reason:"imperative-api"}),this.setState(Qe)}}componentDidCatch(e,t){var r,a;null===(r=(a=this.props).onError)||void 0===r||r.call(a,e,t)}componentDidUpdate(e,t){const{didCatch:r}=this.state,{resetKeys:a}=this.props;var s,i;r&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some((e,r)=>!Object.is(e,t[r]))}(e.resetKeys,a)&&(null===(s=(i=this.props).onReset)||void 0===s||s.call(i,{next:a,prev:e.resetKeys,reason:"keys"}),this.setState(Qe))}render(){const{children:t,fallbackRender:r,FallbackComponent:a,fallback:s}=this.props,{didCatch:i,error:n}=this.state;let o=t;if(i){const t={error:n,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof r)o=r(t);else if(a)o=e.createElement(a,t);else{if(void 0===s)throw n;o=s}}return e.createElement(Ke.Provider,{value:{didCatch:i,error:n,resetErrorBoundary:this.resetErrorBoundary}},o)}}function Je(...e){return l(c(e))}function Ye(){return function(){const t=e.useContext(Me);if(void 0===t)throw new Error("useAuth must be used within an AuthProvider");return t}()}const Ze=[{id:"trending",label:"Trending",icon:m},{id:"discovery",label:"Discovery",icon:d},{id:"friends",label:"Friends",icon:h},{id:"challenges",label:"Challenges",icon:u},{id:"events",label:"Events",icon:p},{id:"analytics",label:"Analytics",icon:x}];function Xe({className:t,onSearch:r,onFeedChange:a,onAuthModalOpen:s}){const{user:i,isAuthenticated:n,signOut:o}=Ye(),[l,c]=e.useState(!1),[m,h]=e.useState(!1),[u,p]=e.useState(""),[x,N]=e.useState("trending"),E=e=>{e.preventDefault(),r?.(u)},S=e=>{N(e),a?.(e)};return z.jsxs("header",{className:Je("bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",t),children:[z.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[z.jsxs("div",{className:"flex items-center justify-between h-16",children:[z.jsx("div",{className:"flex items-center",children:z.jsxs("div",{className:"flex-shrink-0 flex items-center",children:[z.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-500 to-primary-600 rounded-lg flex items-center justify-center",children:z.jsx(d,{className:"w-5 h-5 text-white"})}),z.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900 dark:text-white",children:"TrackShare"})]})}),z.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:Ze.map(e=>{const t=e.icon;return z.jsxs("button",{onClick:()=>S(e.id),className:Je("flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors min-h-[44px] touch-manipulation",x===e.id?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-800"),children:[z.jsx(t,{className:"w-4 h-4"}),z.jsx("span",{children:e.label})]},e.id)})}),z.jsx("div",{className:"hidden md:block flex-1 max-w-lg mx-8",children:z.jsxs("form",{onSubmit:E,className:"relative",children:[z.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:z.jsx(y,{className:"h-5 w-5 text-gray-400"})}),z.jsx("input",{type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"Search tracks, artists, or paste a link...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),z.jsxs("div",{className:"flex items-center space-x-4",children:[z.jsxs("button",{className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors relative min-h-[44px] min-w-[44px] touch-manipulation",children:[z.jsx(g,{className:"w-5 h-5"}),z.jsx("span",{className:"absolute top-0 right-0 w-2 h-2 bg-red-500 rounded-full"})]}),n?z.jsxs("div",{className:"relative",children:[z.jsxs("button",{onClick:()=>h(!m),className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors min-h-[44px] touch-manipulation",children:[z.jsx("img",{src:i?.avatar||"/placeholder-avatar.jpg",alt:i?.displayName,className:"w-8 h-8 rounded-full object-cover"}),z.jsx("span",{className:"hidden sm:block text-sm font-medium text-gray-700 dark:text-gray-300",children:i?.displayName})]}),m&&z.jsxs(f.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-50",children:[z.jsxs("button",{onClick:()=>{s?.("profile"),h(!1)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[z.jsx(b,{className:"w-4 h-4 mr-3"}),"Profile"]}),z.jsxs("button",{onClick:()=>h(!1),className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[z.jsx(v,{className:"w-4 h-4 mr-3"}),"Settings"]}),z.jsx("hr",{className:"my-1 border-gray-200 dark:border-gray-700"}),z.jsxs("button",{onClick:async()=>{try{await o(),h(!1)}catch(e){}},className:"flex items-center w-full px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[z.jsx(j,{className:"w-4 h-4 mr-3"}),"Sign Out"]})]})]}):z.jsxs("div",{className:"flex items-center space-x-2",children:[z.jsx("button",{onClick:()=>s?.("signin"),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors min-h-[44px] touch-manipulation",children:"Sign In"}),z.jsx("button",{onClick:()=>s?.("signup"),className:"px-4 py-2 bg-primary-500 text-white text-sm font-medium rounded-lg hover:bg-primary-600 transition-colors min-h-[44px] touch-manipulation",children:"Sign Up"})]}),z.jsx("button",{onClick:()=>c(!l),className:"md:hidden p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors min-h-[44px] min-w-[44px] touch-manipulation",children:l?z.jsx(w,{className:"w-6 h-6"}):z.jsx(k,{className:"w-6 h-6"})})]})]}),l&&z.jsxs(f.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden border-t border-gray-200 dark:border-gray-700 py-4",children:[z.jsx("div",{className:"mb-4",children:z.jsxs("form",{onSubmit:E,className:"relative",children:[z.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:z.jsx(y,{className:"h-5 w-5 text-gray-400"})}),z.jsx("input",{type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"Search tracks, artists...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),z.jsx("nav",{className:"space-y-2",children:Ze.map(e=>{const t=e.icon;return z.jsxs("button",{onClick:()=>{S(e.id),c(!1)},className:Je("flex items-center space-x-3 w-full px-3 py-2 rounded-lg text-sm font-medium transition-colors min-h-[44px] touch-manipulation",x===e.id?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-800"),children:[z.jsx(t,{className:"w-5 h-5"}),z.jsx("span",{children:e.label})]},e.id)})}),!n&&z.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[z.jsx("button",{onClick:()=>{s?.("signin"),c(!1)},className:"w-full px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Sign In"}),z.jsx("button",{onClick:()=>{s?.("signup"),c(!1)},className:"w-full px-4 py-2 bg-primary-500 text-white text-sm font-medium rounded-lg hover:bg-primary-600 transition-colors",children:"Sign Up"})]})]})]}),m&&z.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>h(!1)})]})}function et({className:e}){return z.jsx("footer",{className:Je("bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",e),children:z.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[z.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[z.jsxs("div",{className:"col-span-1 md:col-span-2",children:[z.jsxs("div",{className:"flex items-center mb-4",children:[z.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-primary-500 to-primary-600 rounded-lg flex items-center justify-center",children:z.jsx(d,{className:"w-5 h-5 text-white"})}),z.jsx("span",{className:"ml-2 text-xl font-bold text-gray-900 dark:text-white",children:"TrackShare"})]}),z.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4 max-w-md",children:"Discover trending music, share your favorites, and connect with friends who love music as much as you do."}),z.jsxs("div",{className:"flex space-x-4",children:[z.jsx("a",{href:"https://github.com/trackshare",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"GitHub",children:z.jsx(N,{className:"w-5 h-5"})}),z.jsx("a",{href:"https://twitter.com/trackshare",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Twitter",children:z.jsx(E,{className:"w-5 h-5"})}),z.jsx("a",{href:"mailto:hello@trackshare.online",className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":"Email",children:z.jsx(S,{className:"w-5 h-5"})})]})]}),z.jsxs("div",{children:[z.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider mb-4",children:"Product"}),z.jsxs("ul",{className:"space-y-3",children:[z.jsx("li",{children:z.jsx("a",{href:"/discovery",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Music Discovery"})}),z.jsx("li",{children:z.jsx("a",{href:"/social",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Social Feed"})}),z.jsx("li",{children:z.jsx("a",{href:"/trending",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Trending"})}),z.jsx("li",{children:z.jsx("a",{href:"/playlists",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Playlists"})})]})]}),z.jsxs("div",{children:[z.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white uppercase tracking-wider mb-4",children:"Support"}),z.jsxs("ul",{className:"space-y-3",children:[z.jsx("li",{children:z.jsx("a",{href:"/help",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Help Center"})}),z.jsx("li",{children:z.jsx("a",{href:"/contact",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Contact Us"})}),z.jsx("li",{children:z.jsx("a",{href:"/privacy",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Privacy Policy"})}),z.jsx("li",{children:z.jsx("a",{href:"/terms",className:"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Terms of Service"})})]})]})]}),z.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200 dark:border-gray-700",children:z.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[z.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Â© 2024 TrackShare. All rights reserved."}),z.jsxs("div",{className:"flex items-center mt-4 md:mt-0",children:[z.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-sm mr-2",children:"Made with"}),z.jsx(P,{className:"w-4 h-4 text-red-500"}),z.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-sm ml-2",children:"for music lovers"})]})]})})]})})}const tt={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"};function rt({size:e="md",className:t,text:r}){return z.jsxs("div",{className:Je("flex flex-col items-center justify-center",t),children:[z.jsx(f.div,{className:Je("border-2 border-gray-300 dark:border-gray-600 border-t-primary-500 rounded-full",tt[e]),animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),r&&z.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:r})]})}function at({error:e,resetErrorBoundary:t}){return z.jsx("div",{className:"min-h-[400px] flex items-center justify-center px-4",children:z.jsxs("div",{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 text-center",children:[z.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900/20 rounded-full flex items-center justify-center mx-auto mb-4",children:z.jsx(C,{className:"w-8 h-8 text-red-600 dark:text-red-400"})}),z.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Oops! Something went wrong"}),z.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"We encountered an error while loading this content. Please try again."}),!1,z.jsxs("button",{onClick:t,className:"flex items-center justify-center px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors mx-auto",children:[z.jsx(_,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})})}function st(){const[t,r]=e.useState(navigator.onLine),[a,s]=e.useState(null),[i,n]=e.useState(!1);e.useEffect(()=>{const e=()=>r(!0),t=()=>r(!1);window.addEventListener("online",e),window.addEventListener("offline",t);window.matchMedia("(display-mode: standalone)").matches&&n(!0);const a=e=>{e.preventDefault(),s(e)},i=()=>{n(!0),s(null)};return window.addEventListener("beforeinstallprompt",a),window.addEventListener("appinstalled",i),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t),window.removeEventListener("beforeinstallprompt",a),window.removeEventListener("appinstalled",i)}},[]);return{isOnline:t,deferredPrompt:a,isInstalled:i,showInstallPrompt:async()=>{if(a)try{await a.prompt();(await a.userChoice).outcome,s(null)}catch(e){}},hideInstallPrompt:()=>{s(null)}}}const it=r.lazy(()=>Ve(()=>import("./HomePage-Bbebq9lK.js"),__vite__mapDeps([0,1,2,3,4,5]))),nt=r.lazy(()=>Ve(()=>import("./DiscoveryPage-BBYcUuIK.js"),__vite__mapDeps([6,1,2,3,4,5]))),ot=r.lazy(()=>Ve(()=>import("./SocialPage-tHoh_vmx.js"),__vite__mapDeps([7,1,4,2,3,5]))),lt=r.lazy(()=>Ve(()=>import("./ProfilePage-B1SEKs4R.js"),__vite__mapDeps([8,1,4,2,3,5]))),ct=r.lazy(()=>Ve(()=>import("./NotFoundPage-BkEMGq8_.js"),__vite__mapDeps([9,3,1,2,4,5])));function dt(){const{isAuthenticated:t,user:r}=Ye(),{isOnline:i}=st();return z.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary-500 to-secondary-500",children:[z.jsx("a",{href:"#main-content",className:"skip-link",children:"Skip to main content"}),z.jsx("div",{className:"fixed top-4 right-4 z-50",children:z.jsx("div",{className:"px-3 py-1 rounded-full text-xs font-semibold backdrop-blur-sm "+(i?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),"aria-live":"polite",children:i?"ðŸŸ¢ Online":"ðŸ”´ Offline"})}),z.jsx("div",{className:"sr-only","aria-live":"polite","aria-atomic":"true",id:"announcements"}),z.jsxs("div",{className:"flex flex-col min-h-screen",children:[z.jsx(Xe,{}),z.jsx("main",{id:"main-content",className:"flex-1",children:z.jsx(Ge,{FallbackComponent:at,onError:(e,t)=>{},children:z.jsx(e.Suspense,{fallback:z.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:z.jsx(rt,{size:"lg"})}),children:z.jsxs(a,{children:[z.jsx(s,{path:"/",element:z.jsx(it,{})}),z.jsx(s,{path:"/discovery",element:z.jsx(nt,{})}),z.jsx(s,{path:"/social",element:z.jsx(ot,{})}),z.jsx(s,{path:"/profile",element:z.jsx(lt,{})}),z.jsx(s,{path:"*",element:z.jsx(ct,{})})]})})})}),z.jsx(et,{})]}),z.jsx(mt,{})]})}function mt(){const{deferredPrompt:e,showInstallPrompt:t,hideInstallPrompt:r}=st();return e?z.jsx(f.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"fixed bottom-6 right-6 z-50",children:z.jsx("div",{className:"bg-white rounded-lg shadow-xl p-4 max-w-sm",children:z.jsxs("div",{className:"flex items-center justify-between",children:[z.jsxs("div",{className:"flex items-center space-x-3",children:[z.jsx("div",{className:"text-2xl",children:"ðŸŽµ"}),z.jsxs("div",{children:[z.jsx("h3",{className:"font-semibold text-gray-900",children:"Install TrackShare"}),z.jsx("p",{className:"text-sm text-gray-600",children:"Get the full app experience"})]})]}),z.jsxs("div",{className:"flex space-x-2",children:[z.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600","aria-label":"Close install prompt",children:"âœ•"}),z.jsx("button",{onClick:t,className:"bg-primary-500 text-white px-3 py-1 rounded text-sm font-medium hover:bg-primary-600 transition-colors",children:"Install"})]})]})})}):null}const ht=new n({defaultOptions:{queries:{staleTime:3e5,cacheTime:6e5,retry:3,refetchOnWindowFocus:!1},mutations:{retry:1}}});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{}).catch(e=>{})}),q.createRoot(document.getElementById("root")).render(z.jsx(r.StrictMode,{children:z.jsxs(o,{client:ht,children:[z.jsx(i,{children:z.jsxs(He,{children:[z.jsx(dt,{}),z.jsx(Be,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})}),z.jsx(M.ReactQueryDevtools,{initialIsOpen:!1})]})}));export{rt as L,Fe as a,Je as c,z as j,Ye as u};
