const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PrivacySettings-CKR7A7ay.js","assets/index-dlknwcDf.js","assets/vendor-KIEtaiwe.js","assets/router-mjhA_Ms8.js","assets/query-Y2oWywPX.js","assets/utils-CrFdsnXa.js","assets/ui-D7Ik4R0t.js","assets/index-BxwdFeju.css","assets/SocialSettings-Dp6vW2oI.js","assets/AppearanceSettings-DwYgC0nE.js"])))=>i.map(i=>d[i]);
import{u as e,j as r,c as s,L as t,_ as a}from"./index-dlknwcDf.js";import{r as i,a as n}from"./vendor-KIEtaiwe.js";import{b as c}from"./router-mjhA_Ms8.js";import{f as d,m as o,w as l,z as m,R as x,I as g,x as y,M as p,J as u,U as h,d as b,K as j}from"./ui-D7Ik4R0t.js";import"./query-Y2oWywPX.js";import"./utils-CrFdsnXa.js";const f=[{id:"spotify",name:"Spotify",icon:"🎵",color:"#1DB954",description:"Connect your Spotify account to play tracks directly in Spotify",features:["Play tracks","View playlists","Sync listening history"]},{id:"youtube_music",name:"YouTube Music",icon:"📺",color:"#FF0000",description:"Link your YouTube Music for enhanced music discovery",features:["Play tracks","View history","Access playlists"]},{id:"tidal",name:"Tidal",icon:"🌊",color:"#00FFFF",description:"Link Tidal for lossless audio quality",features:["Play tracks","Access library","High-quality audio"]},{id:"soundcloud",name:"SoundCloud",icon:"☁️",color:"#FF5500",description:"Connect SoundCloud for independent and emerging artists",features:["Play tracks","Discover new music","Access playlists"]}];const v=[{id:"providers",title:"Music Providers",description:"Connect your music streaming accounts",icon:p,component:function({className:t}){const{user:a,isAuthenticated:n}=e(),[u,h]=c(),[b,j]=i.useState([]),[v,N]=i.useState({}),[k,w]=i.useState(null),[S,C]=i.useState(null);i.useEffect(()=>{if(n){_();const e=u.get("provider_connected"),r=u.get("success"),s=u.get("error");if(e&&"true"===r)C(`${e.charAt(0).toUpperCase()+e.slice(1)} connected successfully!`),_(),u.delete("provider_connected"),u.delete("success"),h(u,{replace:!0}),setTimeout(()=>C(null),5e3);else if(s){const e=u.get("reason")||u.get("message")||"Unknown error";w(`Failed to connect: ${e}`),u.delete("error"),u.delete("reason"),u.delete("message"),u.delete("provider"),h(u,{replace:!0})}}},[n,u,h]);const _=async()=>{try{if(a?.id){const e=await fetch(`/api/profile?userId=${a.id}`);if(e.ok){const r=await e.json(),s=r.profile?.connected_providers||{},t=Object.keys(s).filter(e=>!0===s[e]).map(e=>({provider:e,isConnected:!0,displayName:f.find(r=>r.id===e)?.name||e,icon:f.find(r=>r.id===e)?.icon||"🎵",color:f.find(r=>r.id===e)?.color||"#000000"}));j(t)}}}catch(e){}},F=async e=>{if(n){N(r=>({...r,[e]:!0})),w(null);try{if(!a?.id)throw new Error("User ID not available");const r=await fetch(`/api/providers/${e}/connect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a.id}),credentials:"include"});if(!r.ok)throw new Error(`Failed to connect to ${e}`);const s=await r.json();window.location.href=s.authUrl}catch(r){w(`Failed to connect to ${e}. Please try again.`)}finally{N(r=>({...r,[e]:!1}))}}else w("Please sign in to connect music providers")};return n?r.jsxs("div",{className:s("space-y-6",t),children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Music Providers"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Connect your music streaming accounts to play tracks directly in your preferred apps"})]}),S&&r.jsx(o.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(l,{className:"w-5 h-5 text-green-500 mr-2"}),r.jsx("p",{className:"text-green-700 dark:text-green-400",children:S})]})}),k&&r.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx(m,{className:"w-5 h-5 text-red-500 mr-2"}),r.jsx("p",{className:"text-red-700 dark:text-red-400",children:k})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(e=>{const t=(a=e.id,b.some(e=>e.provider===a&&e.isConnected));var a;const i=(e=>b.find(r=>r.provider===e))(e.id),n=v[e.id];return r.jsxs(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:s("bg-white dark:bg-gray-800 rounded-xl border-2 p-6 transition-all duration-200",t?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/10":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-2xl",style:{backgroundColor:`${e.color}20`},children:e.icon}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:e.name}),t&&r.jsxs("div",{className:"flex items-center text-green-600 dark:text-green-400 text-sm",children:[r.jsx(l,{className:"w-4 h-4 mr-1"}),"Connected"]})]})]}),t&&r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:i?.lastSynced&&r.jsxs("div",{children:["Last synced: ",new Date(i.lastSynced).toLocaleDateString()]})})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:e.description}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2",children:"Features"}),r.jsx("div",{className:"space-y-1",children:e.features.map((e,s)=>r.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full mr-2"}),e]},s))})]}),r.jsx("div",{className:"flex space-x-2",children:t?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>(async e=>{N(r=>({...r,[e]:!0})),w(null);try{w(`${e} disconnection not yet implemented`)}catch(r){w(`Failed to disconnect from ${e}`)}finally{N(r=>({...r,[e]:!1}))}})(e.id),disabled:n,className:"flex-1 flex items-center justify-center px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?r.jsx(x,{className:"w-4 h-4 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(g,{className:"w-4 h-4 mr-2"}),"Disconnect"]})}),r.jsx("button",{onClick:()=>F(e.id),disabled:n,className:"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r.jsx(x,{className:"w-4 h-4"})})]}):r.jsx("button",{onClick:()=>F(e.id),disabled:n,className:"flex-1 flex items-center justify-center px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?r.jsx(x,{className:"w-4 h-4 animate-spin"}):r.jsxs(r.Fragment,{children:[r.jsx(y,{className:"w-4 h-4 mr-2"}),"Connect"]})})})]},e.id)})}),r.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(p,{className:"w-5 h-5 text-blue-500 mr-3 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"How it works"}),r.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"When you connect a music provider, TrackShare will automatically open tracks in your preferred app. You can connect multiple providers and choose which one to use as your primary player."})]})]})})]}):r.jsxs("div",{className:s("text-center py-12",t),children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(d,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Sign in to connect music providers"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Connect your music streaming accounts to play tracks directly in your preferred apps"}),r.jsx("button",{onClick:()=>window.location.href="/signin",className:"px-6 py-3 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"Sign In"})]})}},{id:"privacy",title:"Privacy",description:"Control your data and sharing preferences",icon:u,component:n.lazy(()=>a(()=>import("./PrivacySettings-CKR7A7ay.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])))},{id:"social",title:"Social",description:"Manage friends and social interactions",icon:h,component:n.lazy(()=>a(()=>import("./SocialSettings-Dp6vW2oI.js"),__vite__mapDeps([8,1,2,3,4,5,6,7])))},{id:"notifications",title:"Notifications",description:"Configure notification preferences",icon:b,component:()=>r.jsx("div",{className:"text-center py-12 text-gray-500",children:"Notifications coming soon"})},{id:"appearance",title:"Appearance",description:"Customize the look and feel",icon:j,component:n.lazy(()=>a(()=>import("./AppearanceSettings-DwYgC0nE.js"),__vite__mapDeps([9,1,2,3,4,5,6,7])))}];function N({className:a}){const{user:n,isAuthenticated:c}=e(),[l,m]=i.useState("providers");if(!c)return r.jsx("div",{className:s("min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center p-4",a),children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(d,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Sign in to access settings"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Connect your music providers and customize your TrackShare experience"}),r.jsx("button",{onClick:()=>window.location.href="/signin",className:"px-6 py-3 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:"Sign In"})]})});const x=v.find(e=>e.id===l),g=x?.component;return r.jsx("div",{className:s("min-h-screen bg-gray-50 dark:bg-gray-900",a),children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Settings"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Manage your TrackShare preferences"})]}),r.jsx("nav",{className:"space-y-2",children:v.map(e=>{const t=e.icon,a=l===e.id;return r.jsxs("button",{onClick:()=>m(e.id),className:s("w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors",a?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-700"),children:[r.jsx(t,{className:"w-5 h-5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:e.title}),r.jsx("div",{className:"text-xs opacity-75",children:e.description})]})]},e.id)})})]})}),r.jsx("div",{className:"lg:col-span-3",children:r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:r.jsx(o.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.2},children:r.jsx(i.Suspense,{fallback:r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(t,{})}),children:g&&r.jsx(g,{})})},l)})})]})})})}export{N as default};
